/*
 * Implement a FIR notch filter to remove 60 Hz noise from ECG signal.
 * tonyfu97@uw.edu, Feb 2023
 */

// Sampling constants
const int FS = 350;  // in Hz
const uint32_t SAMPLE_INTERVAL = float(1e6) / FS;  // in us

// Filter constants
const float h[] = {0.00568194,-0.00317276,-0.00980692,-0.00637380,0.00465493,0.01189936,0.00680236,-0.00639900,-0.01395911,-0.00693494,0.00837587,0.01592691,0.00674779,-0.01054694,-0.01774402,-0.00622714,0.01286515,0.01935428,0.00537008,-0.01527644,-0.02070618,-0.00418492,0.01772140,0.02175478,0.00269115,-0.02013723,-0.02246337,-0.00091909,0.02245985,0.02280494,-0.00109103,-0.02462602,-0.02276329,0.00329022,0.02657556,0.02233370,-0.00562228,-0.02825344,-0.02152328,0.00802564,0.02961170,0.02035084,-0.01043541,-0.03061113,-0.01884636,0.01278552,0.03122271,0.01705004,-0.01501097,0.96857143,-0.01501097,0.01705004,0.03122271,0.01278552,-0.01884636,-0.03061113,-0.01043541,0.02035084,0.02961170,0.00802564,-0.02152328,-0.02825344,-0.00562228,0.02233370,0.02657556,0.00329022,-0.02276329,-0.02462602,-0.00109103,0.02280494,0.02245985,-0.00091909,-0.02246337,-0.02013723,0.00269115,0.02175478,0.01772140,-0.00418492,-0.02070618,-0.01527644,0.00537008,0.01935428,0.01286515,-0.00622714,-0.01774402,-0.01054694,0.00674779,0.01592691,0.00837587,-0.00693494,-0.01395911,-0.00639900,0.00680236,0.01189936,0.00465493,-0.00637380,-0.00980692,-0.00317276,0.00568194,};
const size_t FILTER_LENGTH = sizeof(h) / sizeof(float);

// Signal stuff
int16_t x[FILTER_LENGTH];
int writeIdx;

void setup() {
  Serial.begin(115200);
}

void loop() {
  // TODO: Implement sampling
}


float filter() {
  // TODO: Implement FIR filter
  
  return 0.0;
}
